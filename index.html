<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cash View - Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="logo">üí∞</span>
                <span class="brand-name">Cash View</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link active">In√≠cio</a></li>
                <li><a href="investimentos.html" class="nav-link">Investimentos</a></li>
                <li><a href="about.html" class="nav-link">Sobre N√≥s</a></li>
                <li><span class="user-name" id="userName"></span></li>
                <li><span class="user-miles" id="userMiles">‚úàÔ∏è 0 milhas</span></li>
                <li><button class="btn-logout" id="btnLogout">Sair</button></li>
            </ul>
        </div>
    </nav>

    <main class="dashboard">
        <div class="container">
            <header class="dashboard-header">
                <h1>Cash View ‚Äî Visualize seu Dinheiro</h1>
                <p class="subtitle">Transforme o invis√≠vel em vis√≠vel. Tome decis√µes financeiras conscientes.</p>
            </header>

            <div class="cards-grid">
                <!-- Saldo Atual -->
                <div class="card card-balance">
                    <div class="card-header">
                        <h3>üíµ Saldo Atual</h3>
                    </div>
                    <div class="card-body">
                        <div class="balance-amount" id="currentBalance">R$ 0,00</div>
                        <div class="balance-details">
                            <span class="income">‚Üë Receitas: R$ <span id="totalIncome">0,00</span></span>
                            <span class="expense">‚Üì Despesas: R$ <span id="totalExpense">0,00</span></span>
                        </div>
                    </div>
                </div>

                <!-- Fundo Cash View -->
                <div class="card card-fund">
                    <div class="card-header">
                        <h3>üíº Fundo Cash View</h3>
                        <span class="fund-badge">Tesouro Selic</span>
                    </div>
                    <div class="card-body">
                        <div class="fund-main-info">
                            <div class="fund-balance">
                                <span class="fund-label">Saldo Investido</span>
                                <span class="fund-value" id="fundBalance">R$ 0,00</span>
                            </div>
                            <div class="fund-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Rendimento Mensal</span>
                                    <span class="stat-value success" id="monthlyReturn">+R$ 0,00</span>
                                    <span class="stat-percent">(+0,83%)</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Milhas Convertidas</span>
                                    <span class="stat-value" id="totalMilesConverted">‚úàÔ∏è 0</span>
                                </div>
                            </div>
                        </div>
                        <div class="fund-chart-container">
                            <canvas id="fundGrowthChart"></canvas>
                        </div>
                        <div class="fund-actions">
                            <button class="btn btn-primary" onclick="mostrarModalConversaoMilhas()">‚úàÔ∏è Converter Milhas</button>
                            <button class="btn btn-secondary" onclick="mostrarProjecao()">üìä Ver Proje√ß√£o</button>
                        </div>
                    </div>
                </div>

                <!-- Card de Milhas -->
                <div class="card card-miles">
                    <div class="card-header">
                        <h3>‚úàÔ∏è Suas Milhas</h3>
                    </div>
                    <div class="card-body">
                        <div class="miles-display">
                            <div class="miles-count" id="milesCount">0 milhas</div>
                            <div class="miles-value" id="milesValue">‚âà R$ 0,00</div>
                        </div>
                        <div class="miles-info">
                            <p style="color: rgba(255,255,255,0.9); font-size: 0.9rem;">
                                üí° Ganhe milhas praticando boa conduta financeira! Cada milha vale R$ 0,05.
                            </p>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="converterMilhasEmInvestimento()" id="btnConvertMiles">
                            üí∞ Converter em Investimento
                        </button>
                    </div>
                </div>

                <!-- Transa√ß√£o R√°pida -->
                <div class="card">
                    <div class="card-header">
                        <h3>‚ö° Adicionar Transa√ß√£o</h3>
                    </div>
                    <div class="card-body">
                        <form id="transactionForm">
                            <div class="form-group">
                                <input type="number" id="amount" placeholder="Valor (R$)" required step="0.01">
                            </div>
                            <div class="form-group">
                                <input type="text" id="description" placeholder="Descri√ß√£o" required>
                            </div>
                            <div class="form-group">
                                <select id="type" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="income">üí∞ Receita</option>
                                    <option value="expense">üí∏ Despesa</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Adicionar</button>
                        </form>
                    </div>
                </div>

                <!-- Compara√ß√£o Di√°ria -->
                <div class="card">
                    <div class="card-header">
                        <h3>üìä Compara√ß√£o Di√°ria</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="dailyChart"></canvas>
                        <div class="comparison-text" id="dailyComparison"></div>
                    </div>
                </div>

                <!-- Compara√ß√£o Mensal -->
                <div class="card">
                    <div class="card-header">
                        <h3>üìà Compara√ß√£o Mensal</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="monthlyChart"></canvas>
                        <div class="comparison-text" id="monthlyComparison"></div>
                    </div>
                </div>

                <!-- Simulador de Juros -->
                <div class="card card-full">
                    <div class="card-header">
                        <h3>üßÆ Simulador de Juros</h3>
                    </div>
                    <div class="card-body">
                        <form id="interestForm" class="interest-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Valor Total</label>
                                    <input type="number" id="loanAmount" placeholder="Ex: 1000" required step="0.01">
                                </div>
                                <div class="form-group">
                                    <label>Parcelas</label>
                                    <input type="number" id="installments" placeholder="Ex: 12" required min="1">
                                </div>
                                <div class="form-group">
                                    <label>Taxa de Juros (%)</label>
                                    <input type="number" id="interestRate" placeholder="Ex: 2.5" required step="0.01">
                                </div>
                                <button type="submit" class="btn btn-secondary">Calcular</button>
                            </div>
                        </form>
                        <div id="interestResults" class="interest-results hidden">
                            <div class="result-grid">
                                <div class="result-item">
                                    <span class="result-label">Valor √† Vista:</span>
                                    <span class="result-value" id="cashValue">R$ 0,00</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Valor Total Parcelado:</span>
                                    <span class="result-value" id="totalWithInterest">R$ 0,00</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Total de Juros:</span>
                                    <span class="result-value highlight" id="totalInterest">R$ 0,00</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Valor da Parcela:</span>
                                    <span class="result-value" id="installmentValue">R$ 0,00</span>
                                </div>
                            </div>
                            <canvas id="interestChart"></canvas>
                            <div class="educational-note">
                                üí° <strong>Educa√ß√£o Financeira:</strong> Juros pequenos se acumulam em grandes valores no longo prazo.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hist√≥rico -->
                <div class="card card-full">
                    <div class="card-header">
                        <h3>üìú Hist√≥rico de Transa√ß√µes</h3>
                        <button class="btn btn-sm" id="btnExport">üìä Exportar</button>
                    </div>
                    <div class="card-body">
                        <div class="transaction-list" id="transactionList">
                            <div class="empty-state">Nenhuma transa√ß√£o registrada ainda.</div>
                        </div>
                    </div>
                </div>

                <!-- Conquistas -->
                <div class="card card-full">
                    <div class="card-header">
                        <h3>üèÜ Conquistas</h3>
                    </div>
                    <div class="card-body">
                        <div class="achievements-grid" id="achievementsGrid"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal de Convers√£o de Milhas -->
    <div class="modal" id="investmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üíº Converter Milhas em Investimento</h2>
            </div>
            <div class="modal-body">
                <div class="conversion-display">
                    <div class="conversion-item">
                        <span class="conversion-label">Suas Milhas:</span>
                        <span class="conversion-value modal-miles">0</span>
                    </div>
                    <div class="conversion-arrow">‚Üí</div>
                    <div class="conversion-item">
                        <span class="conversion-label">Valor a Investir:</span>
                        <span class="conversion-value modal-value">R$ 0,00</span>
                    </div>
                </div>
                <div class="educational-note">
                    üí° <strong>Investimento Autom√°tico:</strong> Seu valor ser√° investido no Fundo Cash View (Tesouro Selic) com rendimento de ~10% ao ano.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="fecharModalInvestimento()">Cancelar</button>
                <button class="btn btn-primary" onclick="confirmarConversao()">‚úì Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Proje√ß√£o -->
    <div class="modal" id="projectionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìä Proje√ß√£o de Rendimento</h2>
            </div>
            <div class="modal-body">
                <div class="projections-grid">
                    <div class="projection-item">
                        <span class="proj-period">3 meses</span>
                        <span class="proj-value proj-3m">R$ 0,00</span>
                    </div>
                    <div class="projection-item">
                        <span class="proj-period">6 meses</span>
                        <span class="proj-value proj-6m">R$ 0,00</span>
                    </div>
                    <div class="projection-item">
                        <span class="proj-period">1 ano</span>
                        <span class="proj-value proj-1y">R$ 0,00</span>
                    </div>
                </div>
                <canvas id="projectionChart"></canvas>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="fecharModalProjecao()">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Reflex√£o -->
    <div class="modal" id="reflectionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üí≠ Momento de Reflex√£o</h2>
            </div>
            <div class="modal-body">
                <p class="reflection-question">Voc√™ realmente precisa desse gasto agora?</p>
                <p class="reflection-subtext">Essa compra te aproxima ou te afasta das suas metas?</p>
                <div class="reflection-amount" id="reflectionAmount"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="btnDefer">‚è∞ Adiar (+10 milhas)</button>
                <button class="btn btn-primary" id="btnConfirm">‚úì Confirmar</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script src="auth.js"></script>
    <script src="charts.js"></script>
    <script src="main.js"></script>
</body>
</html>
